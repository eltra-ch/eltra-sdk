<?xml version="1.0" encoding="UTF-8"?>
<ContentView xmlns="http://xamarin.com/schemas/2014/forms" 
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:triggers="clr-namespace:EltraNavigo.Controls.Status.Triggers;assembly=EltraNavigo"
             x:Class="EltraNavigo.Controls.Status.ToolStatusView">
    <ContentView.Content>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
                <ColumnDefinition Width="*"></ColumnDefinition>
            </Grid.ColumnDefinitions>

            <Grid Grid.Column="0">
                <Frame Padding="8,0,0,0">
                    <Label Text="{Binding StatusText}" VerticalOptions="Center"/>
                </Frame>
            </Grid>

            <Frame Grid.Column="1">
                <ListView ItemsSource="{Binding ErrorHistory}" 
                          IsRefreshing="{Binding ErrorHistoryRefreshing}" 
                          HeightRequest="{Binding ErrorHistoryListHeight}" 
                          WidthRequest="{Binding ErrorHistoryListWidth}"
                          HasUnevenRows="True" HorizontalOptions="Start">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <TextCell Text="{Binding ErrorDescription}" 
                                      Detail="{Binding ErrorCodeAsString}" 
                                      TextColor="Red" 
                                      DetailColor="DodgerBlue"/>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </Frame>
            <Grid Grid.Column="2">
                <Button Text="Clear Fault" IsVisible="{Binding IsClearFaultButtonVisible}" HeightRequest="32" VerticalOptions="Center">
                    <Button.Triggers> 
                        <EventTrigger Event="Clicked">
                            <triggers:ClearFaultClicked/>
                        </EventTrigger>
                    </Button.Triggers>
                </Button>
            </Grid>
        </Grid>
    </ContentView.Content>
</ContentView>