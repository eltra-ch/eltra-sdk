@page
@model EltraCloud.Pages.IndexModel
@{
    Layout = "_NavLayout";
}

<script>
    function OnSessionSelected(element, uuid)
    {
        document.cookie = "session=" + uuid;
    }

    function OnDeviceSelected(element, serialNumber) {
        document.cookie = "serialNumber=" + serialNumber;
    }
</script>

<br/>

<h4>Sessions</h4>

<p>
    <table class="table table-striped" data-click-to-select="true" data-toggle="table" data-single-select="true">
        <thead>
            <tr>
                <!--<th class="text-center">Active</th>-->

                <th>User</th>
                <th>Status</th>
                <th>Date</th>
            </tr>
        </thead>
            @{ int count = 0; }
            @foreach (var session in Model.Sessions)
            {
    <tr>
        <!--<td>
        <div class="align-content-center text-center">
            @{
                string id = $"SessionRadio{@count}";}
            <input id="@id" type="radio" name="radiogroupsessions" onclick="OnSessionSelected(this, '@session.Uuid')">
        </div>
    </td>-->
        <td>@session.User.AuthData.Name</td>
        <td>@session.Status</td>
        <td>@session.Modified</td>
    </tr>
                count++;
            }
</table>
</p>

<h4>Devices</h4>

<p>
    <table class="table table-striped" data-click-to-select="true" data-toggle="table" data-single-select="true">
        <thead>
            <tr>
                <!--<th class="text-center">Active</th>-->
                <th>Image</th>
                <th>Device Name</th>
                <th>Product Name</th>
                <th>Serial Number</th>
                <th>Version</th>
            </tr>
        </thead>
        @{
            var devices = Model.Devices;
            count = 0;
            if (devices != null)
            {
                foreach (var device in devices)
                {
                    var imageSrc = device.ImageSrc;
                    var productName = device.ProductName;

                <tr>
                    <!--<td>
        <div class="align-content-center text-center">
            @{
                string id = $"DeviceRadio{@count}";}
            <input id="@id"
                   type="radio"
                   name="radiogroupdevice"
                   onclick="OnDeviceSelected(this, '@device.Identification.SerialNumber')">
        </div>
    </td>-->

                    <td>
                        <div class="border-dark align-content-center text-center">
                            <img src="@imageSrc" height="64" />
                        </div>
                    </td>
                    <td>@device.Identification.Name</td>
                    <td>@productName</td>
                    <td>@Html.Raw("0x")@device.Identification.SerialNumber.ToString("X")</td>
                    <td>
                        @Html.Raw("0x")@device.Version.SoftwareVersion.ToString("X")
                        @Html.Raw("0x")@device.Version.HardwareVersion.ToString("X")
                        @Html.Raw("0x")@device.Version.ApplicationNumber.ToString("X")
                        @Html.Raw("0x")@device.Version.ApplicationVersion.ToString("X")
                    </td>
                </tr>

                    count++;
                }
            }
        }
    </table>
</p>